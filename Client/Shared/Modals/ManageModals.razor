@if (LoadingContext.ShowLoading) { <Loading /> }

@if (LoginContext.ShowLoginStateModal) { <LoginState /> }

@if (InstitutionContext.ShowRegisterModal) { <NotRegistered /> }

@if (StatusModalContext.ShowWarning) { <WarningModal /> }

@code{
  [Inject]
  private LoginContext LoginContext { get; set; }
  [Inject]
  private LoadingContext LoadingContext { get; set; }
  [Inject]
  private RegisterInstitutionContext InstitutionContext { get; set; }
  [Inject]
  private StatusModalContext StatusModalContext { get; set; }

  protected override void OnInitialized() {
    LoadingContext.OnChange += HandleStateChange;
    LoginContext.OnChange += HandleStateChange;
    InstitutionContext.OnChange += HandleStateChange;
    StatusModalContext.OnChange += HandleStateChange;
  }

  private void HandleStateChange() {
    StateHasChanged();
  }
}