@page "/application/{InstitutionIdParam}/settings/{Direction}"
@layout ApplicationLayout

<PageTitle>Aplicaci&oacute;n | Configuraciones</PageTitle>

<section>
  <Bar SideBarOption="settings-menu" IsToggle=@false Menu=@Menu Styles="min-width: 5%; max-width: 18%;"/>
  <div class="settings-content">
      @switch (Direction) {
        case "my-account":
          ContentContext.SetSectionContent(SectionName, "Mi cuenta");
          SideBarContext.SetSelectedOptionSettingsMenu(0);
          <SettingsModule>
            <UserProfile />
            <article>
              <div>
                <h5>Roles asignados</h5>
                <div class="roles">
                  @for (byte i = 0; i < 10; i++) {
                    <div class="rol-box">
                      <div class="rol-color"></div>
                      <p>Rol asignado</p>
                    </div>
                  }
                </div>
              </div>
            </article>
          </SettingsModule>
          break;
        case "roles":
          ContentContext.SetSectionContent(SectionName, "Roles");
          SideBarContext.SetSelectedOptionSettingsMenu(3);
          <Roles />
          break;
        case "users":
          ContentContext.SetSectionContent(SectionName, "Usuarios");
          SideBarContext.SetSelectedOptionSettingsMenu(2);
          <Users />
          break;
        case "appearance":
          ContentContext.SetSectionContent(SectionName, "Apariencia");
          SideBarContext.SetSelectedOptionSettingsMenu(1);
          <AppearanceSettings />
          break;
        case "students":
          ContentContext.SetSectionContent(SectionName, "Estudiantes");
          SideBarContext.SetSelectedOptionSettingsMenu(4);
          <StudentsSettings />
          break;
        case "subjects":
          ContentContext.SetSectionContent(SectionName, "Asignaturas");
          SideBarContext.SetSelectedOptionSettingsMenu(5);
          <SubjectsSettings />
          break;
        case "institution":
          ContentContext.SetSectionContent(SectionName, "Institucion");
          SideBarContext.SetSelectedOptionSettingsMenu(7);
          <InstitutionInfo />
          break;
      }
  </div>
</section>

@code {
  private string SectionName { get; } = "Configuraciones";
  [Parameter]
  public string Direction { get; set; } = string.Empty;
  [Parameter]
  public string InstitutionIdParam { get; set; } = string.Empty;
  [CascadingParameter(Name = "Institution")]
  public Guid InstitutionId { get; set; }
  [Inject]
  private ContentContext ContentContext { get; set; }
  [Inject]
  private UserContext _userContext { get; set; }
  [Inject]
  private ISettingsService _settingsService { get; set; }
  [Inject]
  private SideBarContext SideBarContext { get; set; }
  private User User = new();
  private Menu Menu { get; set; } = new();

  protected override void OnInitialized() {
    SideBarContext.SetSelectedOptionMainMenu(8);
    SideBarContext.SetSelectedOptionSettingsMenu(0);
    ContentContext.SetSectionContent("Configuraciones", "Mi cuenta");

    Menu = new Menu() {
      MenuLabels = new List<string>() {
        "configuraciones de usuario", "configuraciones de aplicacion", "configuraciones de estudiantes", "configuraciones de institucion"
      },
      MenuItems = new List<List<List<string>>>() {
        new() {
          new() {
            "Mi cuenta", "fi fi-tr-circle-user", "0", $"/application/{InstitutionId}/settings/my-account"
          }
        },
        new() {
          new() {
            "Apariencia", "fi fi-tr-swatchbook", "1", $"/application/{InstitutionId}/settings/appearance"
          },
          new() {
            "Usuarios", "fi fi-tr-users-medical", "2", $"/application/{InstitutionId}/settings/users" 
          },
          new() { 
            "Roles", "fi fi-tr-rectangle-list", "3", $"/application/{InstitutionId}/settings/roles" 
          }
        },
        new() {
          new() { 
            "Estudiantes", "fi fi-tr-book-bookmark", "4", $"/application/{InstitutionId}/settings/students" 
          },
          new() {
            "Asignaturas", "fi fi-tr-hockey-puck", "5", $"/application/{InstitutionId}/settings/subjects" 
          },
          new() {
            "Pagos", "fi fi-tr-wallet", "6", $"/application/{InstitutionId}/settings/payments"
          }
        }, 
        new() {
          new() {
            "Insitucion", "fi fi-tr-house-chimney", "7", $"/application/{InstitutionId}/settings/institution"
          },
          new() {
            "Plan de pago", "fi fi-tr-money-check", "8", $"/application/{InstitutionId}/settings/payment-plan"
          }
        }
      },
      LastOption = new() {
      "Cerrar sesion", "fi fi-tr-arrow-to-right", "9", "/"
      }
    };
  }
}